# monitoring-and-analysis-of-stock-prices

программа мониторинга и расчета индикаторов на основе исторических данных американских и росийских акций.

update_sql.py - модуль для поддержания актуальности hist_date - базы с историческими значениями курсов акций US - как чисто американчких, так и торгующихся на SPB, а также RU (yahho и  ipvestpy). запускается crontab в 2:40 каждый день. ориентировочно работает до 5:00 и плавно перетекает в расчет teh_an. по субботам происходит подгрузка значений чисто американских акций - завершение обновления до 7:00 - зависит от отклика yahho и  ipvestpy (порой некоторые значения ожидаю по 30 сек).
-->

Также проведится подгрузка из ipvestpy и подсчет значений технического анализа с зарузкой в базу данных teh_an (актуализация значений проводится примерно раз в 15 дней с ограничением по времени работы до 14:00). 

split_check_update.py - модуль проверки проведения сплитов акций - проводит соотношение значений в hist_date и в yahho и  ipvestpy. по итогам сравнения - стирает выявленные значения в hist_date, последующее восполнение значений осуществляет модуль update_sql.py. ограничена по времени работы до 23:00 ( хотя справляется за 2 часа)

ru-spb_****.py - версии модуля, выполняющего расчеты на основе hist_date и teh_an, с сохранением данных в sql таблицу tiker_report, а по отогам создается excel на основе шаблона df_help_*********.xlsx и последующая рассылка почтой на заявленные адреса. запускается вручную - расчет длится около 7 минут ( без Америки))).



------------------------
из основного все..

версии отличались как функционалом, так и проводимыми расчетами, некоторые отвалились, ибо были неинформативными, некоторые еще в процессе осмысления своей работы и показательности.

------------------------


-- планируется трансляция в веб интерфейс. __сейчас думаю над компановкой и наглядностью.

-- возможна рассылка как по запросу, так и по таймеру на телебот.. если будет актуально, пока почта 

-- думаю над автоматизацие перевода акций между чисто Америки и SPB ( типа листинг, и делистинг), сейчас делается вручную - через подгрузку файла с СПБ

------------------------
при работе системы в sql базе данных созданы и поддерживаются следующие таблицы : 

Tables_in_hist_data : base_status ,hist_data ,  teh_an ,tiker_branch ,tiker_report

tiker_branch - список разделения по рынкам (US, SPB, RU), описание тикеров - отрасль.

base_status - статуз базы данных hist_data -  создана для ускорения получения последних значений - считается по результатам работы модуля -- update_sql.py и split_check_update.py.

------------------------

P.S.  в программе сделаны некоторые допущения и округления - курсы SPB реально берутся с Америки - ибо там исторические данные имеют более древние значения, а не начинаются с момента листинга на SPB.

из железа --- sql  работает на orangepi-Zero, split_check_update.py и update_sql.py - banana pi M1..
